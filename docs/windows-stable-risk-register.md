# Windows 稳定版重构风险台账

## R1：主循环替换导致行为偏差
- 表现：自动拿牌或自动刷新触发条件与旧版不一致。
- 影响：核心流程错误，用户体感直接下降。
- 控制：保留 `UseNewLoopEngine` 开关；回归项按阶段执行。
- 回滚：关闭新循环开关，恢复兼容路径。

## R2：OCR 并发参数导致设备不稳定
- 表现：CPU 占用异常、识别波动、延迟尖峰。
- 影响：循环抖动、误判增加。
- 控制：参数渐进调优，保留 CPU 回退策略。
- 回滚：恢复默认并发配置（兼容值）。

## R3：窗体拆分后事件绑定遗漏
- 表现：按钮无响应、热键不生效、状态不刷新。
- 影响：可用性下降。
- 控制：按职责拆分后立即执行事件回归清单。
- 回滚：回退该次拆分提交。

## R4：平台权限未处理导致 mac 端静默失败
- 表现：无截图、无输入注入、无提示。
- 影响：功能不可用且难排障。
- 控制：权限检查前置，失败显式提示并允许重试。
- 回滚：降级只读模式，停止自动操作。

## R5：数据源切换导致推荐结果不稳定
- 表现：阵容推荐跳变或为空。
- 影响：建议可信度下降。
- 控制：推荐稳定窗口、最小候选数量、默认兜底阵容。
- 回滚：切回本地数据源和内置模板。

## R6：删除 Windows 稳定版时误删复用资源
- 表现：双端运行缺资源或脚本路径断裂。
- 影响：构建和运行失败。
- 控制：删除前打 `windows-stable-final` 标签并列资源清单。
- 回滚：按标签整组恢复，再按清单二次删除。
