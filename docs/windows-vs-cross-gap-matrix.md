# Windows 稳定版 vs 双端版差异矩阵

## 1. 总览
- Windows 稳定版：功能覆盖完整，但结构耦合高。
- 双端版：分层清晰、可测试性好，但部分能力仍是最小实现。

## 2. 差异矩阵

| 维度 | Windows 稳定版 | 双端版当前 | 差异结论 |
|---|---|---|---|
| UI 形态 | 多窗体、功能面板完整 | 单主窗体文本面板为主 | 双端需补交互密度 |
| 主循环分层 | `CardService` 偏重 | `CardLoopEngine + Runtime` 分层 | 双端更易维护 |
| 平台支持 | Windows only | Windows + macOS arm64 | 双端满足跨平台 |
| 覆盖层输出 | 实际覆盖层能力 | 当前是 `NoopOverlayPresenter` | 双端缺真实覆盖层 |
| 阵容数据源 | 历史数据积累较多 | 内置模板为主 | 双端需增强本地数据源 |
| 备战席输入 | 旧版有更多 UI/状态输入 | `GameStateReader` 当前输入有限 | 双端需补状态采集 |
| 装备符文建议 | 数据来源相对丰富 | 当前建议逻辑已通但简化 | 双端需补数据深度 |
| 异常可观测 | 捕获点多且分散 | 相对集中 | 双端可继续收敛 |
| 自动化测试 | 基础薄弱 | Core/Platform/E2E 已建 | 双端优势明显 |
| 发布链路 | 旧链路偏 Windows | 新链路支持双端产物 | 双端需稳定收敛 |

## 3. 已锁定 P0 缺口
1. 覆盖层从空实现升级为可观测输出。
2. 游戏状态读取补齐（特别是备战席输入）。
3. 阵容数据从硬编码提升为本地数据源可扩展。
4. 双端发布脚本和验收流程固定化。

## 4. 已锁定 P1 缺口
1. 建议面板信息密度提升（检索、稳定窗口、优先级解释）。
2. 建议链路异常可观测增强。
3. 配置迁移报告增加可读说明。
