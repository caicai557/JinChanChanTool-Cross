# 第4章 自定义赛季信息

> 此功能可供用户自行更新、其他模式英雄池（例如福星）以及解决非中文使用地区的英雄名称差异问题。

本章介绍如何通过手动编辑配置文件来自定义赛季的英雄和装备信息，适合熟悉 JSON 格式的高级用户。

## 赛季文件夹结构

所有赛季数据存储在 `Resources/HeroDatas/` 目录下，每个赛季对应一个独立的文件夹。

```
Resources/
└── HeroDatas/
    ├── 英雄联盟传奇/
    │   ├── HeroData.json      # 英雄数据配置文件
    │   ├── Equipment.json     # 装备数据配置文件（可选）
    │   ├── EquipmentImages/   # 装备图片文件夹（可选）
    │		├── 薄暮法袍.png
    │       ├── 无尽之刃.png
    │       └── ... 
    │   └── images/            # 英雄头像图片文件夹
    │       ├── 库奇.png
    │       ├── 莉莉娅.png
    │       └── ...
    └── 强音对决/
        ├── HeroData.json
        ├── Equipment.json
        ├── EquipmentImages/
        └── images/
```

## 创建新赛季

### 步骤 1：创建赛季文件夹

在 `Resources/HeroDatas/` 目录下创建一个新文件夹，文件夹名称即为赛季名称（例如：`双城之战`）。

### 步骤 2：创建必需的子文件夹

在新赛季文件夹内创建 `images` 文件夹，用于存放英雄头像图片。

在新赛季文件夹内创建 `EquipmentImages` 文件夹，用于存放装备图片。（可选，如果不需要装备功能可以不创建）

### 步骤 3：创建配置文件

在新赛季文件夹内创建以下配置文件：
- `HeroData.json`（必需）
- `Equipment.json`（可选，如果不需要装备功能可以不创建）

## 配置英雄数据（HeroData.json）

### 文件格式

`HeroData.json` 是一个 JSON 数组，包含所有英雄的信息。

### 英雄对象结构

每个英雄对象包含以下字段：

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `HeroName` | 字符串 | 英雄名称（必须与图片文件名一致） | `"库奇"` |
| `Cost` | 整数 | 英雄费用（1-5） | `1` |
| `Profession` | 字符串数组 | 职业列表 | `["大腕射手"]` |
| `Peculiarity` | 字符串数组 | 羁绊/特性列表 | `["8比特"]` |

### 配置示例

```json
[
  {
    "HeroName": "库奇",
    "Cost": 1,
    "Profession": [
      "大腕射手"
    ],
    "Peculiarity": [
      "8比特"
    ]
  },
  {
    "HeroName": "莉莉娅",
    "Cost": 1,
    "Profession": [
      "超级粉丝",
      "秘术护卫"
    ],
    "Peculiarity": [
      "K/DA"
    ]
  },
  {
    "HeroName": "亚索",
    "Cost": 1,
    "Profession": [
      "刀锋领主"
    ],
    "Peculiarity": [
      "真实伤害"
    ]
  }
]
```

### 配置注意事项

1. **英雄名称与图片对应**：`HeroName` 字段的值必须与 `images` 文件夹中的图片文件名完全一致（不包括 `.png` 扩展名）。
   - 例如：`"HeroName": "库奇"` 对应 `images/库奇.png`

2. **费用范围**：`Cost` 字段的值通常为 1-5 之间的整数。

3. **多个职业/羁绊**：一个英雄可以拥有多个职业和羁绊，使用数组表示。

4. **同名英雄合并**：如果配置文件中存在多个同名英雄，程序会自动合并它们的职业和羁绊列表。

5. **自动排序**：程序加载时会自动按照 `Cost` 字段对英雄进行升序排序。

## 配置装备数据（Equipment.json）

### 文件格式

`Equipment.json` 是一个 JSON 数组，包含所有装备的信息。

### 装备对象结构

每个装备对象包含以下字段：

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `Name` | 字符串 | 装备名称 | `"暴风之剑"` |
| `EquipmentType` | 字符串 | 装备类型（散件/普通装备/光明装备/辉耀装备等） | `"散件"` |
| `SyntheticPathway` | 字符串数组 | 合成路径（两个散件名称），散件可省略此字段 | `["暴风之剑", "暴风之剑"]` |

### 配置示例

```json
[
  {
    "Name": "暴风之剑",
    "EquipmentType": "散件"
  },
  {
    "Name": "反曲之弓",
    "EquipmentType": "散件"
  },
  {
    "Name": "死亡之刃",
    "EquipmentType": "普通装备",
    "SyntheticPathway": ["暴风之剑", "暴风之剑"]
  },
  {
    "Name": "巨人杀手",
    "EquipmentType": "普通装备",
    "SyntheticPathway": ["暴风之剑", "反曲之弓"]
  }
]
```

### 配置注意事项

1. **装备名称与图片对应**：`Name` 字段的值必须与 `EquipmentImages` 文件夹中的图片文件名完全一致（不包括 `.png` 扩展名）。
   - 例如：`"Name": "巨人杀手"` 对应 `EquipmentImages/巨人杀手.png`
2. **散件配置**：散件装备只需要 `Name` 和 `EquipmentType` 字段，不需要 `SyntheticPathway`。
3. **合成装备配置**：合成装备必须包含 `SyntheticPathway` 字段，该字段是一个包含两个散件名称的数组。
4. **装备类型**：`EquipmentType` 字段用于区分装备类别，常见类型包括：
   - `"散件"`：基础装备
   - `"普通装备"`：由两个散件合成
   - `"光明装备"`、`"比尔装备"`等：特殊装备类型

## 准备英雄头像图片

### 图片要求

1. **文件格式**：PNG 格式（`.png`）
2. **文件命名**：文件名必须与 `HeroData.json` 中的 `HeroName` 字段完全一致
   - 例如：英雄名为 `"库奇"`，图片文件名应为 `库奇.png`
3. **图片尺寸**：建议使用 64x64 像素的正方形图片
4. **存放位置**：所有图片放在赛季文件夹下的 `images` 子文件夹中

### 缺失图片处理

如果某个英雄的图片文件缺失，程序会：
1. 尝试使用默认图片（`Resources/defaultHeroIcon.png`）
2. 如果默认图片也不存在，则使用空白图片
3. 在启动时弹出错误提示，列出所有缺失的图片文件

## 准备装备图片

### 图片要求

1. **文件格式**：PNG 格式（`.png`）
2. **文件命名**：文件名必须与 `Equipment.json` 中的 `Name` 字段完全一致
   - 例如：装备名为 `"巨人杀手"`，图片文件名应为 `巨人杀手.png`
3. **图片尺寸**：建议使用统一尺寸的正方形图片
4. **存放位置**：所有图片放在赛季文件夹下的 `EquipmentImages` 子文件夹中

### 缺失图片处理

如果某个装备的图片文件缺失，程序会使用默认图片或空白图片代替。

## 应用配置更改

### 方法 1：重启程序

修改配置文件后，重新启动程序即可加载新的配置。

### 方法 2：切换赛季

在程序主窗口中：
1. 点击赛季下拉框
2. 选择其他赛季
3. 再切换回修改的赛季

程序会重新加载该赛季的配置文件。

## 常见问题

### 配置文件格式错误

**症状**：程序启动时提示"文件格式错误"。

**原因**：JSON 格式不正确，可能存在以下问题：
- 缺少逗号或多余逗号
- 括号不匹配
- 字符串未使用双引号
- 中文字符编码问题

**解决方法**：
1. 使用支持 JSON 语法检查的编辑器（如 VS Code、Notepad++）
2. 使用在线 JSON 验证工具检查格式
3. 确保文件使用 UTF-8 编码保存

### 英雄图片无法显示

**症状**：程序中某些英雄显示为空白或默认图片。

**原因**：
- 图片文件名与 `HeroName` 不一致
- 图片文件不存在
- 图片格式不正确

**解决方法**：
1. 检查图片文件名是否与 JSON 中的 `HeroName` 完全一致（区分大小写）
2. 确认图片文件存在于 `images` 文件夹中
3. 确保图片为 PNG 格式

### 赛季未出现在下拉列表

**症状**：新创建的赛季文件夹未出现在程序的赛季选择下拉框中。

**原因**：
- 文件夹位置不正确
- 缺少必需的配置文件

**解决方法**：
1. 确认文件夹创建在 `Resources/HeroDatas/` 目录下
2. 确保文件夹内包含 `HeroData.json` 文件
3. 重启程序

### 同名英雄数据重复

**症状**：配置文件中有多个同名英雄。

**处理方式**：程序会自动合并同名英雄的职业和羁绊列表，保留第一个英雄的 `Cost` 值。

**建议**：手动编辑配置文件时，避免创建同名英雄，保持数据清晰。

## 配置文件备份建议

在修改配置文件前，建议：
1. 备份原始配置文件
2. 使用版本控制工具（如 Git）管理配置文件
3. 记录每次修改的内容和原因

这样可以在出现问题时快速恢复到之前的版本。
